(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1513:function(e,t,r){'use strict';r.r(t);r(10),r(8),r(6),r(4),r(7);var n=r(0),o=(r(52),r(9)),l=r(26),c=r(272),m=r(941),d=(r(59),r(943)),v=r(903),f=(r(19),{props:{dialog:Boolean,onSubmit:Function,closeDialog:Function,loadingSubmit:Boolean,dialogTitle:String,isNewItem:Boolean,actionSaveText:{type:String,default:'Save'},actionCancelText:{type:String,default:'Cancel'},maxWidth:{type:Number,default:600}},computed:{showDialog:{get:function(){return this.dialog;},set:function(e){this.closeDialog();}}}}),h=r(16),I=r(21),x=r.n(I),_=r(279),w=r(259),k=r(129),$=r(958),O=r(959),N=r(260),y=r(874),S=r(63),D=r(81),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r('v-dialog',{attrs:{scrollable:'','max-width':e.maxWidth},model:{value:e.showDialog,callback:function(t){e.showDialog=t;},expression:'showDialog'}},[r('v-card',[r('v-toolbar',{attrs:{color:'primary',dark:''}},[e.isNewItem?r('v-icon',{staticClass:'mr-3'},[e._v('fas fa-plus-square')]):r('v-icon',{staticClass:'mr-3'},[e._v('fas fa-edit')]),e._v(' '),r('v-toolbar-title',[e._v(e._s(e.dialogTitle))]),e._v(' '),r('v-spacer'),e._v(' '),r('v-btn',{attrs:{icon:''},on:{click:function(t){e.showDialog=!1;}}},[r('v-icon',[e._v('mdi-close')])],1)],1),e._v(' '),r('v-form',{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t);}}},[r('v-card-text',[r('div',{staticClass:'text-center'},[e._t('save-header'),e._v(' '),r('h1',{staticClass:'my-4 primary--text font-weight-light'},[e._v(e._s(e.dialogTitle))])],2),e._v(' '),e._t('save-content')],2),e._v(' '),r('v-card-actions',[r('v-spacer'),e._v(' '),r('v-btn',{attrs:{color:'primary',type:'submit',loading:e.loadingSubmit}},[e._v('\n          '+e._s(e.$t('management.save'))+'\n        ')]),e._v(' '),r('v-btn',{on:{click:e.closeDialog}},[e._v('\n          '+e._s(e.$t('management.cancel'))+'\n        ')])],1)],1)],1)],1);}),[],!1,null,null,null),V=component.exports;x()(component,{VBtn:_.a,VCard:w.a,VCardActions:k.a,VCardText:k.c,VDialog:$.a,VForm:O.a,VIcon:N.a,VSpacer:y.a,VToolbar:S.a,VToolbarTitle:D.a});r(277);var j={props:{search:String,searchLabel:String,btnText:String,btnIcon:String,btnTooltip:String,btnClick:Function},computed:{searchItems:{get:function(){return this.search;},set:function(e){this.$emit('onSearch',e);}}}},T=r(62),E=r(858),C=Object(h.a)(j,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r('v-sheet',{staticClass:'d-flex align-baseline mb-5'},[r('v-text-field',{attrs:{'append-icon':'fas fa-search',label:e.searchLabel,'single-line':'','hide-details':''},model:{value:e.searchItems,callback:function(t){e.searchItems=t;},expression:'searchItems'}}),e._v(' '),r('v-spacer'),e._v(' '),e.btnText&&e.btnIcon?[r('v-btn',{staticClass:'white--text',attrs:{color:'primary'},on:{click:e.btnClick}},[r('v-icon',{staticClass:'mr-3',attrs:{dark:''}},[e._v(e._s(e.btnIcon))]),e._v('\n      '+e._s(e.btnText)+'\n    ')],1)]:e._e(),e._v(' '),e.btnText&&!e.btnIcon?[r('v-btn',{attrs:{text:'',color:'primary'},on:{click:e.btnClick}},[e._v(e._s(e.btnText))])]:e._e(),e._v(' '),e.btnIcon&&!e.btnText?[r('v-btn',{attrs:{fab:'',small:'',dark:'',color:'primary',title:e.btnTooltip?e.btnTooltip:''},on:{click:e.btnClick}},[r('v-icon',{attrs:{dark:''}},[e._v(e._s(e.btnIcon))])],1)]:e._e()],2);}),[],!1,null,null,null),R=C.exports;function F(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable;}))),t.push.apply(t,r);}return t;}function P(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t));}));}return e;}x()(C,{VBtn:_.a,VIcon:N.a,VSheet:T.a,VSpacer:y.a,VTextField:E.a});r(20)('app:comp.admins-management-users');var A,U,L,B,H={$_veeValidate:{validator:'new'},components:{ConfirmDialog:d.a,ViewDialog:v.a,SaveDialog:V,TableTopBar:R},data:function(){return{search:'',confirmDialog:!1,userSaveDialog:!1,userTeamsDialog:!1,userProfileDialog:!1,loadingSubmit:!1,error:void 0,headers:[{text:'Avatar',value:'avatar',sortable:!1},{text:'Full Name',align:'left',value:'fullName'},{text:'Profile',align:'left',value:'profile',sortable:!1},{text:'Email',align:'left',value:'email'},{text:'Role Name',align:'left',value:'roleName'},{text:'Teams',align:'left',value:'teamNames',sortable:!1},{text:'Actions',value:'actions',sortable:!1}],editedIndex:-1,idItem:null,selItem:{teams:[]},editedItem:{firstName:'',lastName:'',email:'',avatar:'',roleId:'',teamIds:[],teamNames:'',password:'',passwordConfirmation:''},defaultItem:{firstName:'',lastName:'',email:'',avatar:'',roleId:'',teamIds:[],teamNames:'',password:'',passwordConfirmation:''}};},created:function(){},computed:P({},Object(l.c)({user:'getUser',profileList:'user-profiles/profileList',isUserExternalAccount:'isUserExternalAccount',isYouAuth:'isYouAuth'}),{formTitle:function(){return-1===this.editedIndex?this.$t('management.new_item'):this.$t('management.edit_item');},isNewItem:function(){return-1===this.editedIndex;},users:function(){var e=this,data=[],t=this.$store.state.users.idField,r=this.$FeathersVuex.User.findInStore({query:{$sort:{fullName:1}}}).data;return r.forEach((function(r){var n={id:r[t],firstName:r.firstName,lastName:r.lastName,fullName:r.fullName,email:r.email,avatar:r.avatar,isExternalAccount:e.isUserExternalAccount(r),profileId:r.profileId,teams:r.teams,roleId:r.roleId?r.roleId:'',roleName:r.role?r.role.name:'',teamIds:r.teams.map((function(e){return e.id;})),teamNames:r.teams.map((function(e){return e.name;})).join(', ')};data.push(n);})),data;},roles:function(){var data=[],e=this.$store.state.roles.idField,t=this.$FeathersVuex.Role.findInStore({query:{$sort:{name:1}}}).data;return t.forEach((function(t){var r={id:t[e],name:t.name};data.push(r);})),data;},teams:function(){var data=[],e=this.$store.state.teams.idField,t=this.$FeathersVuex.Team.findInStore({query:{$sort:{name:1}}}).data;return t.forEach((function(t){var r={id:t[e],name:t.name};data.push(r);})),data;}}),watch:{userSaveDialog:function(e){e&&(this.$validator.reset(),this.dismissError());}},methods:P({clickEditItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedItem=Object.assign({},e),this.userSaveDialog=!0;},clickNewItem:function(){this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1,this.userSaveDialog=!0;},clickDeleteItem:function(e){this.idItem=e.id,this.confirmDialog=!0;},clickUserTeams:function(e){this.selItem=e,this.userTeamsDialog=!0;},clickUserProfile:function(e){this.selItem=e,this.userProfileDialog=!0;},closeUserDialog:function(){this.userSaveDialog=!1,this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1,this.$validator.reset(),this.dismissError();},dismissError:function(){this.error=void 0;},onSubmit:(B=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.dismissError(),e.next=4,this.$validator.validateAll();case 4:if(!this.$validator.errors.any()){e.next=8;break;}this.showError('Validation Error!'),e.next=23;break;case 8:return this.loadingSubmit=!0,e.next=12,this.save(this.editedItem);case 12:if(!(t=e.sent)){e.next=23;break;}return r=this.$store.state.users.idField,n=t[r],e.next=19,this.updateMemberIds(n,this.editedItem.teamIds);case 19:e.sent,this.showSuccess(''.concat(this.$t('management.success'),'!')),setTimeout((function(){o.loadingSubmit=!1,o.closeUserDialog();}),1e3);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0);case 28:case'end':return e.stop();}}),e,this,[[0,25]]);}))),function(){return B.apply(this,arguments);}),save:(L=Object(o.a)(regeneratorRuntime.mark((function e(data){var t,r,o,l,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.$store.state.users.idField,r=this.$FeathersVuex.User,e.prev=2,!this.isNewItem){e.next=12;break;}if(data.avatar){e.next=9;break;}return l=new this.$Avatar(data.email),e.next=8,l.getImage();case 8:data.avatar=e.sent;case 9:o=new r({firstName:data.firstName,lastName:data.lastName,email:data.email,avatar:data.avatar,roleId:data.roleId,password:data.password}),e.next=19;break;case 12:if(o=r.getFromStore(data.id),data.email===o.email&&data.avatar){e.next=18;break;}return m=new this.$Avatar(data.email),e.next=17,m.getImage();case 17:data.avatar=e.sent;case 18:o=new r((c={},Object(n.a)(c,t,data.id),Object(n.a)(c,'firstName',data.firstName),Object(n.a)(c,'lastName',data.lastName),Object(n.a)(c,'email',data.email),Object(n.a)(c,'avatar',data.avatar),Object(n.a)(c,'roleId',data.roleId),c));case 19:return e.next=21,o.save();case 21:return e.abrupt('return',e.sent);case 24:if(e.prev=24,e.t0=e.catch(2),this.loadingSubmit=!1,this.showError(e.t0.message),this.isNewItem){e.next=32;break;}return e.next=32,r.get(data.id);case 32:case'end':return e.stop();}}),e,this,[[2,24]]);}))),function(e){return L.apply(this,arguments);}),updateMemberIds:(U=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,l,c,m,d,v,f,h,I=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=I.length>1&&void 0!==I[1]?I[1]:[],e.prev=1,l=null,c={created:[],removed:[]},m=this.$store.state.teams.idField,d=this.$store.state['user-teams'].idField,v=this.$FeathersVuex,f=v.Team,h=v.UserTeam,f.findInStore({query:{$sort:{name:1}}}).data.forEach(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(o){var v,data,f,I,x,_,w,k,$;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v=o[m],data={teamId:'',userId:''},f=r.indexOf(v)>=0,I=o.members.map((function(e){return e.id;})),x=I.indexOf(t),_=x>=0,!f||_){e.next=14;break;}return data.teamId=v,data.userId=t,l=new h(data),e.next=12,l.save();case 12:w=e.sent,c.created.push(w);case 14:if(!_||f){e.next=22;break;}if(!(k=h.findInStore({query:{teamId:v,userId:t}}).data).length){e.next=22;break;}return l=new h(Object(n.a)({},d,k[0][d])),e.next=20,l.remove();case 20:$=e.sent,c.removed.push($);case 22:case'end':return e.stop();}}),e);})));return function(t){return e.apply(this,arguments);};}()),e.abrupt('return',c);case 14:e.prev=14,e.t0=e.catch(1),this.showError(e.t0.message);case 18:case'end':return e.stop();}}),e,this,[[1,14]]);}))),function(e){return U.apply(this,arguments);}),deleteItem:(A=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.confirmDialog=!1,t=this.$FeathersVuex.User,r=this.$store.state.users.idField,o=new t(Object(n.a)({},r,this.idItem)),e.next=7,o.remove();case 7:this.showSuccess(''.concat(this.$t('management.success'),'!')),this.idItem=null,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this.showError(e.t0.message);case 15:case'end':return e.stop();}}),e,this,[[0,11]]);}))),function(){return A.apply(this,arguments);})},Object(l.d)({showSuccess:'SHOW_SUCCESS',showError:'SHOW_ERROR'}))},M=r(1524),W=r(265),Y=r(877),z=r(1072),G=r(871),J=r(1531),K=r(261),Q=r(150),X=r(264),Z=r(27),ee=r(873),te=r(1067),ae=r(862),re=Object(h.a)(H,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r('div',[r('confirm-dialog',{attrs:{dialog:e.confirmDialog,'title-dialog':e.$t('management.confirm_delete_title'),'text-dialog':e.$t('management.confirm_delete_description'),'run-action':e.deleteItem},on:{onCloseDialog:function(t){e.confirmDialog=!1;}}}),e._v(' '),r('view-dialog',{attrs:{dialog:e.userTeamsDialog,'header-icon':'mdi-account-check','header-title':e.selItem.firstName+' '+e.selItem.lastName,'action-text':e.$t('management.close')},on:{onClose:function(t){e.userTeamsDialog=!1;}}},[r('div',{attrs:{slot:'text-content'},slot:'text-content'},[e.selItem.teams&&e.selItem.teams.length?r('v-list',{attrs:{'three-line':''}},[e._l(e.selItem.teams,(function(t,n){return[r('v-list-item',{key:t.id},[r('v-list-item-avatar',[r('v-icon',[e._v('mdi-account-group')])],1),e._v(' '),r('v-list-item-content',[r('v-list-item-title',{domProps:{innerHTML:e._s(t.name)}}),e._v(' '),r('v-list-item-subtitle',{domProps:{innerHTML:e._s(t.description)}})],1)],1)];}))],2):r('span',[e._v(e._s(e.$t('management.noData')))])],1)]),e._v(' '),r('view-dialog',{attrs:{dialog:e.userProfileDialog,'header-icon':'mdi-account-check','header-title':e.selItem.firstName+' '+e.selItem.lastName,'action-text':e.$t('management.close')},on:{onClose:function(t){e.userProfileDialog=!1;}}},[r('div',{attrs:{slot:'text-content'},slot:'text-content'},[e.profileList(e.selItem.profileId).length?r('v-list',{attrs:{'two-line':''}},[e._l(e.profileList(e.selItem.profileId),(function(t,n){return[t.header?r('v-subheader',{key:t.header},[e._v('\n            '+e._s(t.header)+'\n          ')]):r('v-list-item',{key:t.name+'-'+n,on:{click:function(e){}}},[r('v-list-item-avatar',[r('v-icon',[e._v(e._s(t.icon))])],1),e._v(' '),r('v-list-item-content',[r('v-list-item-title',{domProps:{innerHTML:e._s(t.name)}}),e._v(' '),r('v-list-item-subtitle',{domProps:{innerHTML:e._s(t.val)}})],1)],1)];}))],2):r('span',[e._v(e._s(e.$t('management.noData')))])],1)]),e._v(' '),r('save-dialog',{attrs:{dialog:e.userSaveDialog,'on-submit':e.onSubmit,'close-dialog':e.closeUserDialog,'loading-submit':e.loadingSubmit,'is-new-item':e.isNewItem,'dialog-title':e.formTitle,'action-save-text':e.$t('management.save'),'action-cancel-text':e.$t('management.cancel')}},[r('div',{attrs:{slot:'save-header'},slot:'save-header'},[e.isNewItem?r('v-icon',{attrs:{size:'120'}},[e._v('mdi-account-plus')]):r('v-avatar',{attrs:{size:'120'}},[r('img',{attrs:{src:e.editedItem.avatar}})])],1),e._v(' '),r('div',{attrs:{slot:'save-content'},slot:'save-content'},[r('v-row',[r('v-col',{attrs:{cols:'12',sm:'6'}},[r('v-text-field',{directives:[{name:'validate',rawName:'v-validate',value:'required|max:20',expression:'\'required|max:20\''}],attrs:{counter:10,'error-messages':e.errors.collect('firstName'),'data-vv-name':'firstName',label:e.$t('management.firstName')},model:{value:e.editedItem.firstName,callback:function(t){e.$set(e.editedItem,'firstName',t);},expression:'editedItem.firstName'}})],1),e._v(' '),r('v-col',{attrs:{cols:'12',sm:'6'}},[r('v-text-field',{directives:[{name:'validate',rawName:'v-validate',value:'required|max:20',expression:'\'required|max:20\''}],attrs:{counter:20,'error-messages':e.errors.collect('lastName'),'data-vv-name':'lastName',label:e.$t('management.lastName')},model:{value:e.editedItem.lastName,callback:function(t){e.$set(e.editedItem,'lastName',t);},expression:'editedItem.lastName'}})],1),e._v(' '),r('v-col',{attrs:{cols:'12'}},[r('v-text-field',{directives:[{name:'validate',rawName:'v-validate',value:'required|email',expression:'\'required|email\''}],attrs:{'append-icon':'mdi-email','error-messages':e.errors.collect('email'),'data-vv-name':'email',label:e.$t('management.email'),disabled:e.editedItem.isExternalAccount,hint:e.editedItem.isExternalAccount?e.$t('accounts.emailForExternalAccounts'):'','persistent-hint':''},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,'email',t);},expression:'editedItem.email'}})],1),e._v(' '),r('v-col',{attrs:{cols:'12',sm:'6'}},[e.isNewItem?r('v-text-field',{directives:[{name:'validate',rawName:'v-validate',value:'required|min:3',expression:'\'required|min:3\''}],ref:'confirmation',attrs:{'append-icon':'mdi-lock','error-messages':e.errors.collect('password'),'data-vv-name':'password',label:e.$t('management.password'),type:'password'},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,'password',t);},expression:'editedItem.password'}}):e._e()],1),e._v(' '),r('v-col',{attrs:{cols:'12',sm:'6'}},[e.isNewItem?r('v-text-field',{directives:[{name:'validate',rawName:'v-validate',value:'required|confirmed:confirmation',expression:'\'required|confirmed:confirmation\''}],attrs:{'append-icon':'mdi-lock','error-messages':e.errors.collect('passwordConfirmation'),'data-vv-name':'passwordConfirmation',label:e.$t('management.passwordConfirmation'),type:'password'},model:{value:e.editedItem.passwordConfirmation,callback:function(t){e.$set(e.editedItem,'passwordConfirmation',t);},expression:'editedItem.passwordConfirmation'}}):e._e()],1),e._v(' '),r('v-col',{attrs:{cols:'12',sm:'6'}},[r('v-select',{directives:[{name:'validate',rawName:'v-validate'}],attrs:{'append-icon':'mdi-security','item-text':'name','item-value':'id',items:e.roles,'error-messages':e.errors.collect('roleId'),label:e.$t('management.selectRole'),'data-vv-name':'roleId',disabled:e.isYouAuth(e.editedItem.id)},scopedSlots:e._u([{key:'selection',fn:function(t){var n=t.item;return[r('v-chip',[r('span',[e._v(e._s(n.name.length>25?n.name.slice(0,24)+'...':n.name))])])];}}]),model:{value:e.editedItem.roleId,callback:function(t){e.$set(e.editedItem,'roleId',t);},expression:'editedItem.roleId'}})],1),e._v(' '),r('v-col',{attrs:{cols:'12',sm:'6'}},[r('v-select',{directives:[{name:'validate',rawName:'v-validate'}],attrs:{'append-icon':'mdi-account-group','item-text':'name','item-value':'id',items:e.teams,'error-messages':e.errors.collect('teamIds'),label:e.$t('management.selectTeams'),'data-vv-name':'teamIds',multiple:''},scopedSlots:e._u([{key:'selection',fn:function(t){var n=t.item,o=t.index;return[0===o?r('v-chip',[r('span',[e._v(e._s(n.name.length>15?n.name.slice(0,15)+'...':n.name))])]):e._e(),e._v(' '),1===o?r('span',{staticClass:'grey--text caption'},[e._v('(+'+e._s(e.editedItem.teamIds.length-1)+' '+e._s(e.$t('management.others'))+')')]):e._e()];}}]),model:{value:e.editedItem.teamIds,callback:function(t){e.$set(e.editedItem,'teamIds',t);},expression:'editedItem.teamIds'}})],1)],1)],1)]),e._v(' '),r('table-top-bar',{attrs:{search:e.search,'search-label':e.$t('management.search'),'btn-text':e.$t('management.new_item'),'btn-click':e.clickNewItem},on:{onSearch:function(t){e.search=t;}}}),e._v(' '),r('v-data-table',{attrs:{headers:e.headers,items:e.users,search:e.search},scopedSlots:e._u([{key:'item.avatar',fn:function(e){var t=e.item;return[r('v-avatar',{attrs:{size:'32'}},[r('img',{attrs:{src:t.avatar}})])];}},{key:'item.profile',fn:function(t){var n=t.item;return[e.profileList(n.profileId).length?r('v-icon',{on:{click:function(t){return e.clickUserProfile(n);}}},[e._v('mdi-contain')]):r('v-icon',[e._v('mdi-code-brackets')])];}},{key:'item.teamNames',fn:function(t){var n=t.item;return[n.teamNames?r('v-btn',{attrs:{icon:''},on:{click:function(t){return e.clickUserTeams(n);}}},[r('v-badge',{attrs:{color:'red',overlap:''},scopedSlots:e._u([{key:'badge',fn:function(){return[e._v(e._s(n.teamIds.length))];},proxy:!0}],null,!0)},[e._v(' '),r('v-icon',[e._v('mdi-account-group')])],1)],1):r('v-icon',[e._v('mdi-code-brackets')])];}},{key:'item.actions',fn:function(t){var n=t.item;return[r('v-icon',{staticClass:'mr-2',attrs:{small:'',title:e.$t('common.edit')},on:{click:function(t){return e.clickEditItem(n);}}},[e._v('fas fa-pencil-alt\n      ')]),e._v(' '),r('v-icon',{attrs:{small:'',disabled:e.isYouAuth(n.id),title:e.$t('common.remove')},on:{click:function(t){return e.clickDeleteItem(n);}}},[e._v('fas fa-trash-alt\n      ')])];}},{key:'no-data',fn:function(){return[r('span',{staticClass:'headline',attrs:{color:'primary'}},[e._v(e._s(e.$t('management.noData')))])];},proxy:!0},{key:'no-results',fn:function(){return[r('v-alert',{attrs:{value:!0,color:'error',icon:'warning'}},[e._v('\n        '+e._s(e.$t('management.searchNoResults'))+'\n      ')])];},proxy:!0}])})],1);}),[],!1,null,null,null),ne=re.exports;x()(re,{VAlert:M.a,VAvatar:W.a,VBadge:Y.a,VBtn:_.a,VChip:z.a,VCol:G.a,VDataTable:J.a,VIcon:N.a,VList:K.a,VListItem:Q.a,VListItemAvatar:X.a,VListItemContent:Z.b,VListItemSubtitle:Z.c,VListItemTitle:Z.d,VRow:ee.a,VSelect:te.a,VSubheader:ae.a,VTextField:E.a});function ie(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable;}))),t.push.apply(t,r);}return t;}function se(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ie(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):ie(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t));}));}return e;}var oe,le=r(24),ce=r(20)('app:comp.admins-management-roles'),me={$_veeValidate:{validator:'new'},components:{ConfirmDialog:d.a,ViewDialog:v.a,SaveDialog:V,TableTopBar:R},data:function(){return{search:'',confirmDialog:!1,roleSaveDialog:!1,roleUsersDialog:!1,loadingSubmit:!1,error:void 0,headers:[{text:'Role Name',align:'left',value:'roleName'},{text:'Description',align:'left',value:'description',sortable:!1},{text:'Users',align:'left',value:'userNames',sortable:!1},{text:'Actions',value:'actions',sortable:!1}],editedIndex:-1,idItem:null,selItem:{users:[]},editedItem:{roleName:'',description:'',userIds:[],userNames:''},defaultItem:{roleName:'',description:'',userIds:[],userNames:''}};},created:function(){},computed:se({},Object(l.c)({user:'getUser',getRoles:'getRoles',isEnvRole:'isEnvRole',isBaseRole:'isBaseRole',isYouAuth:'isYouAuth'}),{formTitle:function(){return-1===this.editedIndex?this.$t('management.new_item'):this.$t('management.edit_item');},isNewItem:function(){return-1===this.editedIndex;},users:function(){var data=[],e=this.$store.state.users.idField,t=this.$FeathersVuex.User.findInStore({query:{$sort:{fullName:1}}}).data;return t.forEach((function(t){var r={id:t[e],fullName:t.fullName,email:t.email,avatar:t.avatar,roleId:t.roleId?t.roleId:'',roleName:t.role?t.role.name:''};data.push(r);})),data;},roles:function(){var data=[],e=this.$store.state.roles.idField,t=this.$FeathersVuex.Role.findInStore({query:{$sort:{name:1}}}).data;return t.forEach((function(t){var r={id:t[e],roleName:t.name,description:t.description,users:t.users,userIds:t.users.map((function(e){return e.id;})),userNames:t.users.map((function(e){return e.fullName;})).join(', ')};data.push(r);})),data;}}),watch:{roleSaveDialog:function(e){e&&(this.$validator.reset(),this.dismissError());}},methods:se({isDelete:function(e){return!this.isBaseRole(e);},clickEditItem:function(e){this.editedIndex=this.roles.indexOf(e);var t=this.getRole(e.id);this.editedItem=Object.assign({},t),this.roleSaveDialog=!0;},clickNewItem:function(){this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1,this.roleSaveDialog=!0;},deleteItemFromSelection:function(e){var t=this.editedItem.userIds.indexOf(e.id);t>=0&&this.editedItem.userIds.splice(t,1);},clickDeleteItem:function(e){this.isDelete(e.roleName)?(this.idItem=e.id,this.confirmDialog=!0):this.showError(this.$t('management.errNotPossibleRemoveBaseRoles'));},clickItem:function(e){this.selItem=e,this.roleUsersDialog=!0;},closeRoleDialog:function(){this.roleSaveDialog=!1,this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1,this.$validator.reset(),this.dismissError();},dismissError:function(){this.error=void 0;},getRole:function(e){var t=this.$store.state.roles.idField,r=this.$FeathersVuex.Role.getFromStore(e),n={id:r[t],roleName:r.name,description:r.description,userIds:r.users.map((function(e){return e.id;})),userNames:r.users.map((function(e){return e.fullName;})).join(', ')};return n;},onSubmit:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.dismissError(),e.next=4,this.$validator.validateAll();case 4:if(!this.$validator.errors.any()){e.next=8;break;}this.showError('Validation Error!'),e.next=23;break;case 8:return this.loadingSubmit=!0,e.next=12,this.save(this.editedItem);case 12:if(!(t=e.sent)){e.next=23;break;}return r=this.$store.state.roles.idField,n=t[r],e.next=19,this.updateUserIds(n,this.editedItem.userIds);case 19:e.sent,this.showSuccess(''.concat(this.$t('management.success'),'!')),setTimeout((function(){o.loadingSubmit=!1,o.closeRoleDialog();}),1e3);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0);case 28:case'end':return e.stop();}}),e,this,[[0,25]]);})));return function(){return e.apply(this,arguments);};}(),save:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(data){var t,r,o,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.$store.state.users.idField,this.user[t],r=this.$store.state.roles.idField,o=this.$FeathersVuex.Role,e.prev=4,!this.isNewItem){e.next=9;break;}l=new o({name:data.roleName,description:data.description}),e.next=12;break;case 9:if(this.isEnvRole(data.roleName)){e.next=11;break;}throw new le.Conflict(this.$t('management.errRoleNameNotExistInEnv'));case 11:l=new o((c={},Object(n.a)(c,r,data.id),Object(n.a)(c,'name',data.roleName),Object(n.a)(c,'description',data.description),c));case 12:return e.next=14,l.save();case 14:return e.abrupt('return',e.sent);case 17:if(e.prev=17,e.t0=e.catch(4),this.loadingSubmit=!1,this.showError(e.t0.message),this.isNewItem){e.next=25;break;}return e.next=25,o.get(data.id);case 25:case'end':return e.stop();}}),e,this,[[4,17]]);})));return function(t){return e.apply(this,arguments);};}(),updateUserIds:(oe=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,l,c,m,d,v,f,h,I,x,_,w,k,$,O,N=this,y=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>1&&void 0!==y[1]?y[1]:[],e.prev=1,ce('updateUserIds.roleId:',t,'userIds:',r),l=[],m=null,d={added:[],removed:[]},v=this.$store.state.roles.idField,f=this.$store.state.users.idField,h=this.$FeathersVuex,I=h.Role,x=h.User,_=this.getRoles('isGuest'),w=I.findInStore({query:{name:_}}).data,k=w.length?w[0][v]:''){e.next=14;break;}throw new le.NotFound(this.$t('management.errGuestRoleNotExist'));case 14:return $=I.getFromStore(t),x.findInStore({query:{roleId:t}}).data.forEach(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(o){var v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v=o[f],!(r.indexOf(v)>=0)){e.next=6;break;}l.push(v),e.next=12;break;case 6:if(t===k||N.isYouAuth(v)){e.next=12;break;}return c=new x((h={},Object(n.a)(h,f,v),Object(n.a)(h,'roleId',k),h)),e.next=10,c.save();case 10:m=e.sent,d.removed.push(m);case 12:case'end':return e.stop();}}),e);})));return function(t){return e.apply(this,arguments);};}()),O=r.filter((function(e){return l.indexOf(e)<0;})),x.findInStore({query:Object(n.a)({},f,{$in:O})}).data.forEach(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){var o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r[f],N.isYouAuth(o)||!N.isEnvRole($.name)){e.next=7;break;}return c=new x((l={},Object(n.a)(l,f,o),Object(n.a)(l,'roleId',t),l)),e.next=5,c.save();case 5:m=e.sent,d.added.push(m);case 7:case'end':return e.stop();}}),e);})));return function(t){return e.apply(this,arguments);};}()),e.abrupt('return',d);case 25:e.prev=25,e.t0=e.catch(1),this.showError(e.t0.message);case 29:case'end':return e.stop();}}),e,this,[[1,25]]);}))),function(e){return oe.apply(this,arguments);}),deleteItem:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.confirmDialog=!1,t=this.$FeathersVuex.Role,r=this.$store.state.roles.idField,o=new t(Object(n.a)({},r,this.idItem)),e.next=7,o.remove();case 7:this.showSuccess(''.concat(this.$t('management.success'),'!')),this.idItem=null,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this.showError(e.t0.message);case 15:case'end':return e.stop();}}),e,this,[[0,11]]);})));return function(){return e.apply(this,arguments);};}()},Object(l.d)({showSuccess:'SHOW_SUCCESS',showError:'SHOW_ERROR'}))},ue=r(1525),de=r(203),ve=r(1211),fe=Object(h.a)(me,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r('div',[r('confirm-dialog',{attrs:{dialog:e.confirmDialog,'title-dialog':e.$t('management.confirm_delete_title'),'text-dialog':e.$t('management.confirm_delete_description'),'run-action':e.deleteItem},on:{onCloseDialog:function(t){e.confirmDialog=!1;}}}),e._v(' '),r('view-dialog',{attrs:{dialog:e.roleUsersDialog,'header-icon':'mdi-security','header-title':e.selItem.roleName,'action-text':e.$t('management.close')},on:{onClose:function(t){e.roleUsersDialog=!1;}}},[r('div',{attrs:{slot:'text-content'},slot:'text-content'},[e.selItem.users&&e.selItem.users.length?r('v-list',{attrs:{'three-line':''}},[e._l(e.selItem.users,(function(t,n){return[r('v-list-item',{key:t.id},[r('v-list-item-avatar',[r('img',{attrs:{src:t.avatar}})]),e._v(' '),r('v-list-item-content',[r('v-list-item-title',{domProps:{innerHTML:e._s(t.fullName)}}),e._v(' '),r('v-list-item-subtitle',{domProps:{innerHTML:e._s('<span class=\'font-italic\'>Email:</span> '+t.email)}})],1)],1)];}))],2):r('span',[e._v(e._s(e.$t('management.noData')))])],1)]),e._v(' '),r('save-dialog',{attrs:{dialog:e.roleSaveDialog,'on-submit':e.onSubmit,'close-dialog':e.closeRoleDialog,'loading-submit':e.loadingSubmit,'is-new-item':e.isNewItem,'dialog-title':e.formTitle,'action-save-text':e.$t('management.save'),'action-cancel-text':e.$t('management.cancel')}},[r('div',{attrs:{slot:'save-content'},slot:'save-content'},[r('v-row',[r('v-col',{attrs:{cols:'12'}},[r('v-text-field',{directives:[{name:'validate',rawName:'v-validate',value:'required|max:60',expression:'\'required|max:60\''}],attrs:{counter:60,'error-messages':e.errors.collect('roleName'),'data-vv-name':'roleName',label:e.$t('management.roleName'),hint:e.$t('management.matchEnvValue'),'persistent-hint':''},model:{value:e.editedItem.roleName,callback:function(t){e.$set(e.editedItem,'roleName',t);},expression:'editedItem.roleName'}})],1),e._v(' '),r('v-col',{attrs:{cols:'12'}},[r('v-textarea',{attrs:{value:e.editedItem.description,label:e.$t('management.formDescription')},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,'description',t);},expression:'editedItem.description'}})],1),e._v(' '),r('v-col',{attrs:{cols:'12'}},[r('v-autocomplete',{attrs:{items:e.users,filled:'',chips:'',label:e.$t('management.selectUsers'),'item-text':'fullName','item-value':'id',multiple:''},scopedSlots:e._u([{key:'selection',fn:function(data){return[r('v-chip',e._b({attrs:{'input-value':data.selected,close:''},on:{click:data.select,'click:close':function(t){return e.deleteItemFromSelection(data.item);}}},'v-chip',data.attrs,!1),[r('v-avatar',{attrs:{left:''}},[r('v-img',{attrs:{src:data.item.avatar}})],1),e._v('\n                '+e._s(data.item.fullName)+'\n              ')],1)];}},{key:'item',fn:function(data){return[[r('v-list-item-avatar',[r('img',{attrs:{src:data.item.avatar}})]),e._v(' '),r('v-list-item-content',[r('v-list-item-title',{domProps:{innerHTML:e._s(data.item.fullName)}}),e._v(' '),r('v-list-item-subtitle',{domProps:{innerHTML:e._s(data.item.roleName)}})],1)]];}}]),model:{value:e.editedItem.userIds,callback:function(t){e.$set(e.editedItem,'userIds',t);},expression:'editedItem.userIds'}})],1)],1)],1)]),e._v(' '),r('table-top-bar',{attrs:{search:e.search,'search-label':e.$t('management.search'),'btn-text':e.$t('management.new_item'),'btn-click':e.clickNewItem},on:{onSearch:function(t){e.search=t;}}}),e._v(' '),r('v-data-table',{attrs:{headers:e.headers,items:e.roles,search:e.search},scopedSlots:e._u([{key:'item.userNames',fn:function(t){var n=t.item;return[n.userNames?r('v-btn',{attrs:{icon:''},on:{click:function(t){return e.clickItem(n);}}},[r('v-badge',{attrs:{color:'red',overlap:''},scopedSlots:e._u([{key:'badge',fn:function(){return[e._v(e._s(n.userIds.length))];},proxy:!0}],null,!0)},[e._v(' '),r('v-icon',[e._v('mdi-account-multiple')])],1)],1):r('v-icon',[e._v('mdi-code-brackets')])];}},{key:'item.actions',fn:function(t){var n=t.item;return[r('v-icon',{staticClass:'mr-2',attrs:{small:'',title:e.$t('common.edit')},on:{click:function(t){return e.clickEditItem(n);}}},[e._v('fas fa-pencil-alt\n      ')]),e._v(' '),r('v-icon',{attrs:{small:'',title:e.$t('common.remove')},on:{click:function(t){return e.clickDeleteItem(n);}}},[e._v('fas fa-trash-alt\n      ')])];}},{key:'no-data',fn:function(){return[r('span',{staticClass:'headline',attrs:{color:'primary'}},[e._v(e._s(e.$t('management.noData')))])];},proxy:!0},{key:'no-results',fn:function(){return[r('v-alert',{attrs:{value:!0,color:'error',icon:'warning'}},[e._v('\n        '+e._s(e.$t('management.searchNoResults'))+'\n      ')])];},proxy:!0}])})],1);}),[],!1,null,null,null),pe=fe.exports;x()(fe,{VAlert:M.a,VAutocomplete:ue.a,VAvatar:W.a,VBadge:Y.a,VBtn:_.a,VChip:z.a,VCol:G.a,VDataTable:J.a,VIcon:N.a,VImg:de.a,VList:K.a,VListItem:Q.a,VListItemAvatar:X.a,VListItemContent:Z.b,VListItemSubtitle:Z.c,VListItemTitle:Z.d,VRow:ee.a,VTextField:E.a,VTextarea:ve.a});r(40),r(44);function he(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable;}))),t.push.apply(t,r);}return t;}function ge(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?he(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):he(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t));}));}return e;}r(24),r(20)('app:comp.admins-management-roles');var be={$_veeValidate:{validator:'new'},components:{ConfirmDialog:d.a,ViewDialog:v.a,SaveDialog:V,TableTopBar:R},data:function(){return{search:'',confirmDialog:!1,teamSaveDialog:!1,teamUsersDialog:!1,loadingSubmit:!1,error:void 0,headers:[{text:'Team Name',align:'left',value:'teamName'},{text:'Description',align:'left',value:'description',sortable:!1},{text:'Users',align:'left',value:'userNames',sortable:!1},{text:'Actions',value:'actions',sortable:!1}],editedIndex:-1,idItem:null,selItem:{users:[]},editedItem:{teamName:'',description:'',userIds:[],userNames:''},defaultItem:{teamName:'',description:'',userIds:[],userNames:''}};},created:function(){},computed:ge({formTitle:function(){return-1===this.editedIndex?this.$t('management.new_item'):this.$t('management.edit_item');},isNewItem:function(){return-1===this.editedIndex;}},Object(l.c)({user:'getUser'}),{users:function(){var data=[],e=this.$store.state.users.idField,t=this.$FeathersVuex.User.findInStore({query:{$sort:{fullName:1}}}).data;return t.forEach((function(t){var r={id:t[e],fullName:t.fullName,email:t.email,avatar:t.avatar,roleId:t.roleId?t.roleId:'',roleName:t.role?t.role.name:''};data.push(r);})),data;},teams:function(){var data=[],e=this.$store.state.teams.idField,t=this.$FeathersVuex.Team.findInStore({query:{$sort:{name:1}}}).data;return t.forEach((function(t){var r={id:t[e],teamName:t.name,description:t.description,members:t.members,userIds:t.members.map((function(e){return e.id;})),userNames:t.members.map((function(e){return e.fullName;})).join(', ')};data.push(r);})),data;}}),watch:{teamSaveDialog:function(e){e&&(this.$validator.reset(),this.dismissError());}},methods:ge({isYouSelf:function(e){return(this.user?this.user.teams.map((function(e){return e.id;})):[]).includes(e);},clickEditItem:function(e){this.editedIndex=this.teams.indexOf(e);var t=this.getTeam(e.id);this.editedItem=Object.assign({},t),this.teamSaveDialog=!0;},clickNewItem:function(){this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1,this.teamSaveDialog=!0;},clickDeleteItem:function(e){this.idItem=e.id,this.confirmDialog=!0;},clickItem:function(e){this.selItem=e,this.teamUsersDialog=!0;},deleteItemFromSelection:function(e){var t=this.editedItem.userIds.indexOf(e.id);t>=0&&this.editedItem.userIds.splice(t,1);},closeTeamDialog:function(){this.teamSaveDialog=!1,this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1,this.$validator.reset(),this.dismissError();},dismissError:function(){this.error=void 0;},getTeam:function(e){var t=this.$store.state.teams.idField,r=this.$FeathersVuex.Team.getFromStore(e),n={id:r[t],teamName:r.name,description:r.description,userIds:r.members.map((function(e){return e.id;})),userNames:r.members.map((function(e){return e.fullName;})).join(', ')};return n;},onSubmit:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.dismissError(),e.next=4,this.$validator.validateAll();case 4:if(!this.$validator.errors.any()){e.next=8;break;}this.showError('Validation Error!'),e.next=23;break;case 8:return this.loadingSubmit=!0,e.next=12,this.save(this.editedItem);case 12:if(!(t=e.sent)){e.next=23;break;}return r=this.$store.state.teams.idField,n=t[r],e.next=19,this.updateUserIds(n,this.editedItem.userIds);case 19:e.sent,this.showSuccess(''.concat(this.$t('management.success'),'!')),setTimeout((function(){o.loadingSubmit=!1,o.closeTeamDialog();}),1e3);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0);case 28:case'end':return e.stop();}}),e,this,[[0,25]]);})));return function(){return e.apply(this,arguments);};}(),save:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(data){var t,r,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$store.state.teams.idField,r=this.$FeathersVuex.Team,e.prev=2,o=this.isNewItem?new r({name:data.teamName,description:data.description}):new r((l={},Object(n.a)(l,t,data.id),Object(n.a)(l,'name',data.teamName),Object(n.a)(l,'description',data.description),l)),e.next=6,o.save();case 6:return e.abrupt('return',e.sent);case 9:if(e.prev=9,e.t0=e.catch(2),this.loadingSubmit=!1,this.showError(e.t0.message),this.isNewItem){e.next=17;break;}return e.next=17,r.get(data.id);case 17:case'end':return e.stop();}}),e,this,[[2,9]]);})));return function(t){return e.apply(this,arguments);};}(),updateUserIds:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,l,c,m,d,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:[],e.prev=1,l=[],c={added:[],removed:[]},m=this.$store.state['user-teams'].idField,d=this.$FeathersVuex.UserTeam,d.findInStore({query:{teamId:t}}).data.forEach(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var o,v,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t[o],!(r.indexOf(o)>=0)){e.next=6;break;}l.push(o),e.next=12;break;case 6:return v=t[m],t=new d(Object(n.a)({},m,v)),e.next=10,t.remove();case 10:f=e.sent,c.removed.push(f);case 12:case'end':return e.stop();}}),e);})));return function(t){return e.apply(this,arguments);};}()),r.filter((function(e){return l.indexOf(e)<0;})).forEach(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new d({teamId:t,userId:r}),e.next=3,n.save();case 3:o=e.sent,c.added.push(o);case 5:case'end':return e.stop();}}),e);})));return function(t){return e.apply(this,arguments);};}()),e.abrupt('return',c);case 16:e.prev=16,e.t0=e.catch(1),this.showError(e.t0.message);case 20:case'end':return e.stop();}}),e,this,[[1,16]]);})));return function(t){return e.apply(this,arguments);};}(),deleteItem:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.confirmDialog=!1,t=this.$FeathersVuex.Team,r=this.$store.state.teams.idField,o=new t(Object(n.a)({},r,this.idItem)),e.next=7,o.remove();case 7:this.showSuccess(''.concat(this.$t('management.success'),'!')),this.idItem=null,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this.showError(e.t0.message);case 15:case'end':return e.stop();}}),e,this,[[0,11]]);})));return function(){return e.apply(this,arguments);};}()},Object(l.d)({showSuccess:'SHOW_SUCCESS',showError:'SHOW_ERROR'}))},Ie=Object(h.a)(be,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r('div',[r('confirm-dialog',{attrs:{dialog:e.confirmDialog,'title-dialog':e.$t('management.confirm_delete_title'),'text-dialog':e.$t('management.confirm_delete_description'),'run-action':e.deleteItem},on:{onCloseDialog:function(t){e.confirmDialog=!1;}}}),e._v(' '),r('view-dialog',{attrs:{dialog:e.teamUsersDialog,'header-icon':'mdi-account-group','header-title':e.selItem.teamName,'action-text':e.$t('management.close')},on:{onClose:function(t){e.teamUsersDialog=!1;}}},[r('div',{attrs:{slot:'text-content'},slot:'text-content'},[e.selItem.members&&e.selItem.members.length?r('v-list',{attrs:{'three-line':''}},[e._l(e.selItem.members,(function(t,n){return[r('v-list-item',{key:t.id},[r('v-list-item-avatar',[r('img',{attrs:{src:t.avatar}})]),e._v(' '),r('v-list-item-content',[r('v-list-item-title',{domProps:{innerHTML:e._s(t.fullName)}}),e._v(' '),r('v-list-item-subtitle',{domProps:{innerHTML:e._s('<span class=\'font-italic\'>Email:</span> '+t.email)}})],1)],1)];}))],2):r('span',[e._v(e._s(e.$t('management.noData')))])],1)]),e._v(' '),r('save-dialog',{attrs:{dialog:e.teamSaveDialog,'on-submit':e.onSubmit,'close-dialog':e.closeTeamDialog,'loading-submit':e.loadingSubmit,'is-new-item':e.isNewItem,'dialog-title':e.formTitle,'action-save-text':e.$t('management.save'),'action-cancel-text':e.$t('management.cancel')}},[r('div',{attrs:{slot:'save-content'},slot:'save-content'},[r('v-row',[r('v-col',{attrs:{cols:'12'}},[r('v-text-field',{directives:[{name:'validate',rawName:'v-validate',value:'required|max:60',expression:'\'required|max:60\''}],attrs:{counter:60,'error-messages':e.errors.collect('teamName'),'data-vv-name':'teamName',label:e.$t('management.teamName')},model:{value:e.editedItem.teamName,callback:function(t){e.$set(e.editedItem,'teamName',t);},expression:'editedItem.teamName'}})],1),e._v(' '),r('v-col',{attrs:{cols:'12'}},[r('v-textarea',{attrs:{value:e.editedItem.description,label:e.$t('management.formDescription')},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,'description',t);},expression:'editedItem.description'}})],1),e._v(' '),r('v-col',{attrs:{cols:'12'}},[r('v-autocomplete',{attrs:{items:e.users,filled:'',chips:'',label:e.$t('management.selectUsers'),'item-text':'fullName','item-value':'id',multiple:''},scopedSlots:e._u([{key:'selection',fn:function(data){return[r('v-chip',e._b({attrs:{'input-value':data.selected,close:''},on:{click:data.select,'click:close':function(t){return e.deleteItemFromSelection(data.item);}}},'v-chip',data.attrs,!1),[r('v-avatar',{attrs:{left:''}},[r('v-img',{attrs:{src:data.item.avatar}})],1),e._v('\n                '+e._s(data.item.fullName)+'\n              ')],1)];}},{key:'item',fn:function(data){return[[r('v-list-item-avatar',[r('img',{attrs:{src:data.item.avatar}})]),e._v(' '),r('v-list-item-content',[r('v-list-item-title',{domProps:{innerHTML:e._s(data.item.fullName)}}),e._v(' '),r('v-list-item-subtitle',{domProps:{innerHTML:e._s(data.item.roleName)}})],1)]];}}]),model:{value:e.editedItem.userIds,callback:function(t){e.$set(e.editedItem,'userIds',t);},expression:'editedItem.userIds'}})],1)],1)],1)]),e._v(' '),r('table-top-bar',{attrs:{search:e.search,'search-label':e.$t('management.search'),'btn-text':e.$t('management.new_item'),'btn-click':e.clickNewItem},on:{onSearch:function(t){e.search=t;}}}),e._v(' '),r('v-data-table',{staticClass:'elevation-1',attrs:{headers:e.headers,items:e.teams,search:e.search},scopedSlots:e._u([{key:'item.userNames',fn:function(t){var n=t.item;return[n.userNames?r('v-btn',{attrs:{icon:''},on:{click:function(t){return e.clickItem(n);}}},[r('v-badge',{attrs:{color:'red',overlap:''},scopedSlots:e._u([{key:'badge',fn:function(){return[e._v(e._s(n.userIds.length))];},proxy:!0}],null,!0)},[e._v(' '),r('v-icon',[e._v('mdi-account-multiple')])],1)],1):r('v-icon',[e._v('mdi-code-brackets')])];}},{key:'item.actions',fn:function(t){var n=t.item;return[r('v-icon',{staticClass:'mr-2',attrs:{small:'',title:e.$t('common.edit')},on:{click:function(t){return e.clickEditItem(n);}}},[e._v('fas fa-pencil-alt\n      ')]),e._v(' '),r('v-icon',{attrs:{small:'',title:e.$t('common.remove')},on:{click:function(t){return e.clickDeleteItem(n);}}},[e._v('fas fa-trash-alt\n      ')])];}},{key:'no-data',fn:function(){return[r('span',{staticClass:'headline',attrs:{color:'primary'}},[e._v(e._s(e.$t('management.noData')))])];},proxy:!0},{key:'no-results',fn:function(){return[r('v-alert',{attrs:{value:!0,color:'error',icon:'warning'}},[e._v('\n        '+e._s(e.$t('management.searchNoResults'))+'\n      ')])];},proxy:!0}])})],1);}),[],!1,null,null,null),xe=Ie.exports;function _e(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable;}))),t.push.apply(t,r);}return t;}x()(Ie,{VAlert:M.a,VAutocomplete:ue.a,VAvatar:W.a,VBadge:Y.a,VBtn:_.a,VChip:z.a,VCol:G.a,VDataTable:J.a,VIcon:N.a,VImg:de.a,VList:K.a,VListItem:Q.a,VListItemAvatar:X.a,VListItemContent:Z.b,VListItemSubtitle:Z.c,VListItemTitle:Z.d,VRow:ee.a,VTextField:E.a,VTextarea:ve.a});var we,ke={components:{AppPageHeader:c.a,PanelsTopBar:m.a,AdminsManagementUsers:ne,AdminsManagementRoles:pe,AdminsManagementTeams:xe},data:function(){return{title:this.$t('management.title'),description:this.$t('management.description'),panels:[],items:[{panel:'users',name:this.$t('accounts.users'),icon:'mdi-account-multiple'},{panel:'roles',name:this.$t('accounts.roles'),icon:'mdi-security'},{panel:'teams',name:this.$t('accounts.teams'),icon:'mdi-account-group'}]};},head:function(){return{title:this.title,meta:[{hid:'description',name:'description',content:this.description}]};},created:(we=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop();}}),e);}))),function(){return we.apply(this,arguments);}),computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_e(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_e(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t));}));}return e;}({},Object(l.c)({config:'getConfig'})),methods:{allOpen:function(){this.panels=this.items.map((function(e,i){return i;}));},allClose:function(){this.panels=[];}}},$e=r(1520),Oe=r(1521),Ne=r(1522),ye=r(1523),Se=Object(h.a)(ke,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r('div',[r('app-page-header',{attrs:{'page-title':e.description}}),e._v(' '),r('panels-top-bar',{attrs:{'btn1-icon':'mdi-plus','btn1-tooltip':e.$t('accounts.allOpen'),'btn2-icon':'mdi-minus','btn2-tooltip':e.$t('accounts.allClose'),'click-btn1':e.allOpen,'click-btn2':e.allClose}}),e._v(' '),r('v-expansion-panels',{attrs:{focusable:'',multiple:'',inset:''},model:{value:e.panels,callback:function(t){e.panels=t;},expression:'panels'}},e._l(e.items,(function(t,i){return r('v-expansion-panel',{key:i},[r('v-expansion-panel-header',[r('div',{staticClass:'d-flex align-baseline'},[r('v-icon',{staticClass:'mr-3'},[e._v(e._s(t.icon))]),e._v(' '),r('span',[e._v(e._s(t.name))])],1)]),e._v(' '),r('v-expansion-panel-content',['users'===t.panel?r('admins-management-users'):'roles'===t.panel?r('admins-management-roles'):'teams'===t.panel?r('admins-management-teams'):e._e()],1)],1);})),1)],1);}),[],!1,null,null,null);t.default=Se.exports;x()(Se,{VExpansionPanel:$e.a,VExpansionPanelContent:Oe.a,VExpansionPanelHeader:Ne.a,VExpansionPanels:ye.a,VIcon:N.a});},903:function(e,t,r){'use strict';r(19);var n={props:{dialog:Boolean,headerIcon:String,headerTitle:String,actionText:{type:String,default:'Close'},maxWidth:{type:Number,default:400},isTextContent:{type:Boolean,default:!0}},computed:{showDialog:{get:function(){return this.dialog;},set:function(e){this.$emit('onClose',e);}}}},o=r(16),l=r(21),c=r.n(l),m=r(876),d=r(279),v=r(259),f=r(129),h=r(958),I=r(260),x=r(874),_=r(63),w=r(81),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r('v-dialog',{attrs:{scrollable:'','max-width':e.maxWidth},model:{value:e.showDialog,callback:function(t){e.showDialog=t;},expression:'showDialog'}},[r('v-card',[r('v-toolbar',{attrs:{color:'primary',dark:''}},[e.headerIcon?r('v-icon',{staticClass:'mr-3'},[e._v(e._s(e.headerIcon))]):r('v-app-bar-nav-icon'),e._v(' '),r('v-toolbar-title',[e._v(e._s(e.headerTitle))]),e._v(' '),r('v-spacer'),e._v(' '),r('v-btn',{attrs:{icon:''},on:{click:function(t){e.showDialog=!1;}}},[r('v-icon',[e._v('mdi-close')])],1)],1),e._v(' '),e._t('card-content'),e._v(' '),e.isTextContent?r('v-card-text',[e._t('text-content')],2):e._e(),e._v(' '),r('v-card-actions',{staticClass:'primary'},[r('v-btn',{staticClass:'mx-auto',attrs:{dark:'',text:''},on:{click:function(t){e.showDialog=!1;}}},[e._v(e._s(e.actionText))])],1)],2)],1);}),[],!1,null,null,null);t.a=component.exports;c()(component,{VAppBarNavIcon:m.a,VBtn:d.a,VCard:v.a,VCardActions:f.a,VCardText:f.c,VDialog:h.a,VIcon:I.a,VSpacer:x.a,VToolbar:_.a,VToolbarTitle:w.a});},941:function(e,t,r){'use strict';var n={props:{btn1Text:String,btn1Icon:String,btn1Tooltip:String,clickBtn1:Function,btn2Text:String,btn2Icon:String,btn2Tooltip:String,clickBtn2:Function}},o=r(16),l=r(21),c=r.n(l),m=r(279),d=r(260),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r('div',{staticClass:'d-flex justify-space-around mb-3'},[e.btn1Text&&e.btn1Icon?[r('v-btn',{staticClass:'white--text',attrs:{color:'primary'},on:{click:e.clickBtn1}},[r('v-icon',{staticClass:'mr-3',attrs:{dark:''}},[e._v(e._s(e.btn1Icon))]),e._v('\n      '+e._s(e.btn1Text)+'\n    ')],1),e._v(' '),e._t('default'),e._v(' '),r('v-btn',{staticClass:'white--text',attrs:{color:'primary'},on:{click:e.clickBtn2}},[r('v-icon',{staticClass:'mr-3',attrs:{dark:''}},[e._v(e._s(e.btn2Icon))]),e._v('\n      '+e._s(e.btn2Text)+'\n    ')],1)]:e._e(),e._v(' '),e.btn1Text&&!e.btn1Icon?[r('v-btn',{attrs:{text:'',color:'primary'},on:{click:e.clickBtn1}},[e._v(e._s(e.btn1Text))]),e._v(' '),e._t('default'),e._v(' '),r('v-btn',{attrs:{text:'',color:'primary'},on:{click:e.clickBtn2}},[e._v(e._s(e.btn2Text))])]:e._e(),e._v(' '),e.btn1Icon&&!e.btn1Text?[r('v-btn',{attrs:{fab:'',small:'',dark:'',color:'primary',title:e.btn1Tooltip?e.btn1Tooltip:''},on:{click:e.clickBtn1}},[r('v-icon',{attrs:{dark:''}},[e._v(e._s(e.btn1Icon))])],1),e._v(' '),e._t('default'),e._v(' '),r('v-btn',{attrs:{fab:'',small:'',dark:'',color:'primary',title:e.btn2Tooltip?e.btn2Tooltip:''},on:{click:e.clickBtn2}},[r('v-icon',{attrs:{dark:''}},[e._v(e._s(e.btn2Icon))])],1)]:e._e()],2);}),[],!1,null,null,null);t.a=component.exports;c()(component,{VBtn:m.a,VIcon:d.a});},943:function(e,t,r){'use strict';var n={props:{dialog:Boolean,runAction:Function,titleDialog:String,textDialog:String}},o=r(16),l=r(21),c=r.n(l),m=r(279),d=r(259),v=r(129),f=r(958),h=r(874),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r('v-dialog',{attrs:{persistent:'','max-width':'320'},model:{value:e.dialog,callback:function(t){e.dialog=t;},expression:'dialog'}},[r('v-card',[r('v-card-title',{staticClass:'title'},[e._v(e._s(e.titleDialog)+'?')]),e._v(' '),r('v-card-text',[e._v('\n      '+e._s(e.textDialog)+'\n    ')]),e._v(' '),r('v-card-actions',[r('v-spacer'),e._v(' '),r('v-btn',{attrs:{text:''},on:{click:function(t){return e.$emit('onCloseDialog');}}},[e._v(e._s(e.$t('common.disagree')))]),e._v(' '),r('v-btn',{attrs:{text:'',color:'primary'},on:{click:e.runAction}},[e._v(e._s(e.$t('common.agree')))])],1)],1)],1);}),[],!1,null,null,null);t.a=component.exports;c()(component,{VBtn:m.a,VCard:d.a,VCardActions:v.a,VCardText:v.c,VCardTitle:v.d,VDialog:f.a,VSpacer:h.a});}}]);
//# sourceMappingURL=01cb5e03826348037900.js.map