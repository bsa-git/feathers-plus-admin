(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{898:function(e,t,r){"use strict";var o={props:{dialog:Boolean,runAction:Function,titleDialog:String,textDialog:String}},n=r(16),l=r(21),d=r.n(l),c=r(276),m=r(256),v=r(128),h=r(905),f=r(874),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{persistent:"","max-width":"320"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"title"},[e._v(e._s(e.titleDialog)+"?")]),e._v(" "),r("v-card-text",[e._v("\n      "+e._s(e.textDialog)+"\n    ")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("onCloseDialog")}}},[e._v(e._s(e.$t("common.disagree")))]),e._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.runAction}},[e._v(e._s(e.$t("common.agree")))])],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;d()(component,{VBtn:c.a,VCard:m.a,VCardActions:v.a,VCardText:v.b,VCardTitle:v.c,VDialog:h.a,VSpacer:f.a})},901:function(e,t,r){"use strict";r(52);var o,n=r(9),l=(r(26),{$_veeValidate:{validator:"new"},props:{dialog:Boolean,runAction:Function,showError:Function,titleDialog:String,validateType:String,labelInput:String,hintInput:String},data:function(){return{model:{inputValue:""}}},watch:{"model.inputValue":function(e,t){this.$emit("onInput",e)}},methods:{onSubmit:(o=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:this.$validator.errors.any()?this.showError("Validation Error!"):this.runAction();case 3:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}}),d=r(16),c=r(21),m=r.n(c),v=r(276),h=r(256),f=r(128),x=r(872),w=r(905),y=r(917),j=r(903),S=r(888),C=r(874),O=r(858),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{persistent:"","max-width":"320"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"title"},[e._v(e._s(e.titleDialog))]),e._v(" "),r("v-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("v-card-text",[r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},["numeric"===e.validateType?r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],attrs:{"error-messages":e.errors.collect("inputValue"),"data-vv-name":"inputValue",label:e.labelInput,hint:e.hintInput,"persistent-hint":""},model:{value:e.model.inputValue,callback:function(t){e.$set(e.model,"inputValue",t)},expression:"model.inputValue"}}):"alpha_num"===e.validateType?r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"}],attrs:{"error-messages":e.errors.collect("inputValue"),"data-vv-name":"inputValue",label:e.labelInput,hint:e.hintInput,"persistent-hint":""},model:{value:e.model.inputValue,callback:function(t){e.$set(e.model,"inputValue",t)},expression:"model.inputValue"}}):"email"===e.validateType?r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"error-messages":e.errors.collect("inputValue"),"data-vv-name":"inputValue",label:e.labelInput,hint:e.hintInput,"persistent-hint":""},model:{value:e.model.inputValue,callback:function(t){e.$set(e.model,"inputValue",t)},expression:"model.inputValue"}}):e._e()],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{text:"",type:"submit",color:"primary"}},[e._v(e._s(e.$t("common.enter")))]),e._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("onCloseInputDialog")}}},[e._v(e._s(e.$t("common.close")))])],1)],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;m()(component,{VBtn:v.a,VCard:h.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VContainer:x.a,VDialog:w.a,VFlex:y.a,VForm:j.a,VLayout:S.a,VSpacer:C.a,VTextField:O.a})},988:function(e,t,r){"use strict";r.r(t);r(10),r(8),r(6),r(4),r(7);var o=r(0),n=r(26),l=(r(40),r(44),r(52),r(9)),d=r(153),c=r(898),m=r(901);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f,x,w,y,j=r(20)("app:page.user-profile"),S={layout:"user",$_veeValidate:{validator:"new"},components:{ConfirmDialog:c.a,InputCodeDialog:m.a},data:function(){return{title:this.$t("profile.title"),description:this.$t("profile.description"),confirmDialog:!1,inputCodeDialog:!1,loadingSubmit:!1,loadingRemove:!1,error:void 0,changeIdentity:!1,changePassword:!1,verifyCode:"",model:{firstName:"",lastName:"",email:"",avatar:"",password:"",oldPassword:"",newPassword:""}}},created:function(){this.user&&(this.model.avatar=this.user.avatar,this.model.firstName=this.user.firstName,this.model.lastName=this.user.lastName,this.model.email=this.user.email),j("created.isExternalAccount:",this.isExternalAccount)},computed:h({},Object(n.c)({config:"getConfig",isExternalAccount:"isExternalAccount"}),{},Object(n.e)("auth",["user"])),methods:h({onSubmit:(y=Object(l.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dismissError(),e.next=3,this.$validator.validateAll();case 3:if(!this.$validator.errors.any()){e.next=7;break}this.showError("Validation Error!"),e.next=14;break;case 7:if(!this.isAnyChange()){e.next=14;break}return this.loadingSubmit=!0,e.next=12,this.save(this.model);case 12:e.sent&&(this.isChangeEmail()||this.showSuccess("".concat(this.$t("profile.successSaveUser"),"!")),setTimeout((function(){t.loadingSubmit=!1}),1e3));case 14:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)}),save:(w=Object(l.a)(regeneratorRuntime.mark((function e(data){var t,r,n,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,r=this.$store.state.users.idField,n=this.$FeathersVuex.User,e.prev=4,!this.isChangeUser()){e.next=13;break}return j("<<userChange>> Start userChange"),l={},Object(o.a)(l,r,this.user[r]),Object(o.a)(l,"firstName",data.firstName),Object(o.a)(l,"lastName",data.lastName),c=new n(l),e.next=11,c.save();case 11:t=e.sent,j("userChange.OK");case 13:if(!this.isChangePassword()){e.next=19;break}return j("<<passwordChange>> Start passwordChange"),e.next=17,d.a.passwordChange(data.oldPassword,data.newPassword,{email:this.user.email});case 17:t=e.sent,j("passwordChange.OK");case 19:if(!this.isChangeEmail()){e.next=27;break}return j("<<identityChange>> Start identityChange"),e.next=23,d.a.identityChange(data.password,{email:data.email},{email:this.user.email});case 23:t=e.sent,this.showWarning({text:this.$t("authManagement.resendVerification"),timeout:1e4}),this.inputCodeDialog=!0,j("identityChange.OK");case 27:return e.abrupt("return",t);case 30:return e.prev=30,e.t0=e.catch(4),this.loadingSubmit=!1,this.error=e.t0,this.showError(e.t0.message),e.next=38,n.get(this.user[r]);case 38:case"end":return e.stop()}}),e,this,[[4,30]])}))),function(e){return w.apply(this,arguments)}),remove:(x=Object(l.a)(regeneratorRuntime.mark((function e(){var t,r,n,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loadingRemove=!0,t=this.$store.state.users.idField,r=this.$FeathersVuex.User,n=new r(Object(o.a)({},t,this.user[t])),e.next=7,n.remove();case 7:this.showSuccess("".concat(this.$t("profile.successRemoveUser"),"!")),setTimeout((function(){l.logout(),l.$router.push(l.$i18n.path(l.config.homePath))}),1e3),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),this.loadingRemove=!1,this.error=e.t0,this.showError(e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return x.apply(this,arguments)}),isChangeUser:function(){return this.model.firstName!==this.user.firstName||this.model.lastName!==this.user.lastName},isChangeEmail:function(){var e=this.model.email!==this.user.email;return!!this.changeIdentity&&e},isChangePassword:function(){return!!this.changePassword&&!!this.model.oldPassword},isAnyChange:function(){return this.isChangeUser()||this.isChangeEmail()||this.isChangePassword()},dismissError:function(){this.error=void 0,this.clearError()},verifySignupShort:(f=Object(l.a)(regeneratorRuntime.mark((function e(){var t,r,n,l,c,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j("<<verifySignUpShort>> Start verifySignUpShort"),t=this.$store.state.users.idField,r=this.$FeathersVuex.User,this.inputCodeDialog=!1,j("verifySignUpShort.verifyCode:",this.verifyCode),n=this.verifyCode,e.next=9,d.a.verifySignupShort(n,{email:this.user.email});case 9:if(!e.sent){e.next=24;break}return j("verifySignUpShort.OK"),this.showSuccess(this.$t("authManagement.successfulUserVerification")),c=new this.$Avatar(this.model.email),e.next=17,c.getImage();case 17:return m=e.sent,l={},Object(o.a)(l,t,this.user[t]),Object(o.a)(l,"avatar",m),v=new r(l),e.next=22,v.save();case 22:e.next=25;break;case 24:this.showError({text:this.$t("authManagement.errorUserVerification"),timeout:1e4});case 25:e.next=32;break;case 27:e.prev=27,e.t0=e.catch(0),this.error=e.t0,"User not found."===e.t0.message?this.showError({text:this.$t("authManagement.msgForErrorUserNotFind"),timeout:1e4}):e.t0.message.includes("Invalid token.")?this.showError({text:this.$t("authManagement.msgForErrorInvalidToken"),timeout:1e4}):this.showError({text:e.t0.message,timeout:1e4});case 32:case"end":return e.stop()}}),e,this,[[0,27]])}))),function(){return f.apply(this,arguments)}),setVerifyCode:function(e){this.verifyCode=e}},Object(n.d)("auth",{clearError:"clearAuthenticateError"}),{},Object(n.d)({showSuccess:"SHOW_SUCCESS",showError:"SHOW_ERROR",showWarning:"SHOW_WARNING"}),{},Object(n.b)(["logout"]))},C=r(16),O=r(21),_=r.n(O),$=r(276),V=r(128),P=r(1024),E=r(871),k=r(872),N=r(903),R=r(873),A=r(874),D=r(858),T=r(878),component=Object(C.a)(S,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("input-code-dialog",{attrs:{dialog:e.inputCodeDialog,"title-dialog":e.$t("authManagement.titleVerifySignUp"),"label-input":e.$t("authManagement.verificationCode"),"hint-input":e.$t("authManagement.hintEnterSecurityCode"),"validate-type":"numeric","run-action":e.verifySignupShort,"show-error":e.showError},on:{onCloseInputDialog:function(t){e.inputCodeDialog=!1},onInput:e.setVerifyCode}}),e._v(" "),r("confirm-dialog",{attrs:{dialog:e.confirmDialog,"title-dialog":e.$t("profile.titleDialog"),"text-dialog":e.$t("profile.textDialog"),"run-action":e.remove},on:{onCloseDialog:function(t){e.confirmDialog=!1}}}),e._v(" "),r("v-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:20",expression:"'required|max:20'"}],attrs:{counter:15,"error-messages":e.errors.collect("firstName"),"data-vv-name":"firstName",label:e.$t("signup.firstName")},model:{value:e.model.firstName,callback:function(t){e.$set(e.model,"firstName",t)},expression:"model.firstName"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:20",expression:"'required|max:20'"}],attrs:{counter:20,"error-messages":e.errors.collect("lastName"),"data-vv-name":"lastName",label:e.$t("signup.lastName")},model:{value:e.model.lastName,callback:function(t){e.$set(e.model,"lastName",t)},expression:"model.lastName"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:e.changeIdentity?6:12}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"append-icon":"mdi-email","error-messages":e.errors.collect("email"),"data-vv-name":"email",label:e.$t("login.email"),disabled:!!e.isExternalAccount||!e.changeIdentity,hint:e.isExternalAccount?e.$t("accounts.emailForExternalAccounts"):e.changeIdentity?e.$t("profile.hintIdentity"):"","persistent-hint":""},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})],1),e._v(" "),!e.isExternalAccount&&e.changeIdentity?r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],attrs:{"append-icon":"mdi-lock","error-messages":e.errors.collect("password"),"data-vv-name":"password",label:e.$t("login.password"),type:"password",disabled:!e.changeIdentity,hint:e.changeIdentity?e.$t("profile.hintPassword"):"","persistent-hint":""},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1):e._e(),e._v(" "),!e.isExternalAccount&&e.changePassword?r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],attrs:{"append-icon":"mdi-lock","error-messages":e.errors.collect("oldPassword"),"data-vv-name":"oldPassword",label:e.$t("profile.oldPassword"),type:"password"},model:{value:e.model.oldPassword,callback:function(t){e.$set(e.model,"oldPassword",t)},expression:"model.oldPassword"}})],1):e._e(),e._v(" "),!e.isExternalAccount&&e.changePassword?r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],attrs:{"append-icon":"mdi-lock","error-messages":e.errors.collect("newPassword"),"data-vv-name":"newPassword",label:e.$t("profile.newPassword"),type:"password"},model:{value:e.model.newPassword,callback:function(t){e.$set(e.model,"newPassword",t)},expression:"model.newPassword"}})],1):e._e(),e._v(" "),e.isExternalAccount?e._e():r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-checkbox",{attrs:{label:e.$t("profile.changeIdentity"),disabled:e.changePassword},model:{value:e.changeIdentity,callback:function(t){e.changeIdentity=t},expression:"changeIdentity"}})],1),e._v(" "),e.isExternalAccount?e._e():r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-checkbox",{attrs:{label:e.$t("profile.changePassword"),disabled:e.changeIdentity},model:{value:e.changePassword,callback:function(t){e.changePassword=t},expression:"changePassword"}})],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",type:"submit",loading:e.loadingSubmit}},[e._v("\n        "+e._s(e.$t("profile.save"))+"\n      ")]),e._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[r("v-btn",e._g({staticClass:"ml-3",attrs:{loading:e.loadingRemove,color:"error"},on:{click:function(t){e.confirmDialog=!0}}},o),[e._v("\n            "+e._s(e.$t("profile.remove"))+"\n          ")])]}}])},[e._v(" "),r("span",[e._v(e._s(e.$t("profile.removeAccount")))])])],1)],1)],1)}),[],!1,null,null,null),W=component.exports;_()(component,{VBtn:$.a,VCardActions:V.a,VCheckbox:P.a,VCol:E.a,VContainer:k.a,VForm:N.a,VRow:R.a,VSpacer:A.a,VTextField:D.a,VTooltip:T.a});function I(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function F(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):I(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}r(20)("app:comp.user-profile-address");var U={layout:"user",$_veeValidate:{validator:"new"},components:{},data:function(){return{loadingSubmit:!1,error:void 0,model:{personalPhone:"",personalWebSite:""}}},created:function(){this.user&&(this.model.personalPhone=this.user.profile.personalPhone,this.model.personalWebSite=this.user.profile.personalWebSite)},computed:F({},Object(n.c)({config:"getConfig"}),{},Object(n.e)("auth",["user"])),methods:F({onSubmit:function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dismissError(),e.next=3,this.$validator.validateAll();case 3:if(!this.$validator.errors.any()){e.next=7;break}this.showError("Validation Error!"),e.next=13;break;case 7:return this.loadingSubmit=!0,e.next=11,this.save(this.model);case 11:e.sent&&(this.showSuccess("".concat(this.$t("profile.successSaveUser"),"!")),setTimeout((function(){t.loadingSubmit=!1}),1e3));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClear:function(){this.model.personalPhone="",this.model.personalWebSite="",this.$validator.reset(),this.dismissError()},dismissError:function(){this.error=void 0},save:function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(data){var t,r,n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$store.state["user-profiles"].idField,r=this.$FeathersVuex.UserProfile,e.prev=2,n={},Object(o.a)(n,t,this.user.profile.id),Object(o.a)(n,"personalPhone",data.personalPhone),Object(o.a)(n,"personalWebSite",data.personalWebSite),l=new r(n),e.next=7,l.save();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),this.loadingSubmit=!1,this.error=e.t0,this.showError(e.t0.message),e.next=18,r.get(this.user.profile.id);case 18:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},Object(n.d)({showSuccess:"SHOW_SUCCESS",showError:"SHOW_ERROR"}))},L=Object(C.a)(U,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:{regex:e.$util.getRegex("phone")},expression:"{ regex: $util.getRegex('phone')}"}],attrs:{counter:15,"error-messages":e.errors.collect("personalPhone"),"data-vv-name":"personalPhone",label:e.$t("profile.personalPhone")},model:{value:e.model.personalPhone,callback:function(t){e.$set(e.model,"personalPhone",t)},expression:"model.personalPhone"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"url",expression:"'url'"}],attrs:{"error-messages":e.errors.collect("personalWebSite"),"data-vv-name":"personalWebSite",label:e.$t("profile.personalWebSite")},model:{value:e.model.personalWebSite,callback:function(t){e.$set(e.model,"personalWebSite",t)},expression:"model.personalWebSite"}})],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",type:"submit",loading:e.loadingSubmit}},[e._v("\n        "+e._s(e.$t("profile.save"))+"\n      ")]),e._v(" "),r("v-btn",{staticClass:"ml-3",on:{click:e.onClear}},[e._v("\n        "+e._s(e.$t("login.clear"))+"\n      ")])],1)],1)],1)}),[],!1,null,null,null),Z=L.exports;_()(L,{VBtn:$.a,VCardActions:V.a,VCol:E.a,VContainer:k.a,VForm:N.a,VRow:R.a,VSpacer:A.a,VTextField:D.a});function B(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function H(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?B(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):B(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}r(20)("app:comp.user-profile-address");var M={layout:"user",$_veeValidate:{validator:"new"},components:{},data:function(){return{loadingSubmit:!1,error:void 0,model:{addressSuite:"",addressStreet:"",addressCity:"",addressState:"",addressStateAbbr:"",addressCountry:"",addressCountryCode:"",addressZipCode:"",addressLatitude:"",addressLongitude:""}}},created:function(){this.user&&(this.model.addressSuite=this.user.profile.addressSuite,this.model.addressStreet=this.user.profile.addressStreet,this.model.addressCity=this.user.profile.addressCity,this.model.addressState=this.user.profile.addressState,this.model.addressStateAbbr=this.user.profile.addressStateAbbr,this.model.addressCountry=this.user.profile.addressCountry,this.model.addressCountryCode=this.user.profile.addressCountryCode,this.model.addressZipCode=this.user.profile.addressZipCode,this.model.addressLatitude=this.user.profile.addressLatitude,this.model.addressLongitude=this.user.profile.addressLongitude)},computed:H({},Object(n.c)({config:"getConfig"}),{},Object(n.e)("auth",["user"])),methods:H({onSubmit:function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dismissError(),e.next=3,this.$validator.validateAll();case 3:if(!this.$validator.errors.any()){e.next=7;break}this.showError("Validation Error!"),e.next=13;break;case 7:return this.loadingSubmit=!0,e.next=11,this.save(this.model);case 11:e.sent&&(this.showSuccess("".concat(this.$t("profile.successSaveUser"),"!")),setTimeout((function(){t.loadingSubmit=!1}),1e3));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClear:function(){this.model.addressSuite="",this.model.addressStreet="",this.model.addressCity="",this.model.addressState="",this.model.addressStateAbbr="",this.model.addressCountry="",this.model.addressCountryCode="",this.model.addressZipCode="",this.model.addressLatitude="",this.model.addressLongitude="",this.$validator.reset(),this.dismissError()},dismissError:function(){this.error=void 0},save:function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(data){var t,r,n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$store.state["user-profiles"].idField,r=this.$FeathersVuex.UserProfile,e.prev=2,n={},Object(o.a)(n,t,this.user.profile.id),Object(o.a)(n,"addressSuite",data.addressSuite),Object(o.a)(n,"addressStreet",data.addressStreet),Object(o.a)(n,"addressCity",data.addressCity),Object(o.a)(n,"addressState",data.addressState),Object(o.a)(n,"addressStateAbbr",data.addressStateAbbr),Object(o.a)(n,"addressCountry",data.addressCountry),Object(o.a)(n,"addressCountryCode",data.addressCountryCode),Object(o.a)(n,"addressZipCode",data.addressZipCode),Object(o.a)(n,"addressLatitude",data.addressLatitude),Object(o.a)(n,"addressLongitude",data.addressLongitude),l=new r(n),e.next=7,l.save();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),this.loadingSubmit=!1,this.error=e.t0,this.showError(e.t0.message),e.next=18,r.get(this.user.profile.id);case 18:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},Object(n.d)({showSuccess:"SHOW_SUCCESS",showError:"SHOW_ERROR"}))},J=Object(C.a)(M,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"max:15",expression:"'max:15'"}],attrs:{counter:15,"error-messages":e.errors.collect("addressSuite"),"data-vv-name":"addressSuite",label:e.$t("profile.addressSuite")},model:{value:e.model.addressSuite,callback:function(t){e.$set(e.model,"addressSuite",t)},expression:"model.addressSuite"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"max:25",expression:"'max:25'"}],attrs:{counter:25,"error-messages":e.errors.collect("addressStreet"),"data-vv-name":"addressStreet",label:e.$t("profile.addressStreet")},model:{value:e.model.addressStreet,callback:function(t){e.$set(e.model,"addressStreet",t)},expression:"model.addressStreet"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"max:25",expression:"'max:25'"}],attrs:{counter:25,"error-messages":e.errors.collect("addressCity"),"data-vv-name":"addressCity",label:e.$t("profile.addressCity")},model:{value:e.model.addressCity,callback:function(t){e.$set(e.model,"addressCity",t)},expression:"model.addressCity"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:{regex:e.$util.getRegex("zip_code")},expression:"{ regex: $util.getRegex('zip_code')}"}],attrs:{counter:15,"error-messages":e.errors.collect("addressZipCode"),"data-vv-name":"addressZipCode",label:e.$t("profile.addressZipCode")},model:{value:e.model.addressZipCode,callback:function(t){e.$set(e.model,"addressZipCode",t)},expression:"model.addressZipCode"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"max:15",expression:"'max:15'"}],attrs:{counter:15,"error-messages":e.errors.collect("addressState"),"data-vv-name":"addressState",label:e.$t("profile.addressState")},model:{value:e.model.addressState,callback:function(t){e.$set(e.model,"addressState",t)},expression:"model.addressState"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"max:5",expression:"'max:5'"}],attrs:{counter:5,"error-messages":e.errors.collect("addressStateAbbr"),"data-vv-name":"addressStateAbbr",label:e.$t("profile.addressStateAbbr")},model:{value:e.model.addressStateAbbr,callback:function(t){e.$set(e.model,"addressStateAbbr",t)},expression:"model.addressStateAbbr"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"max:25",expression:"'max:25'"}],attrs:{counter:25,"error-messages":e.errors.collect("addressCountry"),"data-vv-name":"addressCountry",label:e.$t("profile.addressCountry")},model:{value:e.model.addressCountry,callback:function(t){e.$set(e.model,"addressCountry",t)},expression:"model.addressCountry"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"max:5",expression:"'max:5'"}],attrs:{counter:5,"error-messages":e.errors.collect("addressCountryCode"),"data-vv-name":"addressCountryCode",label:e.$t("profile.addressCountryCode")},model:{value:e.model.addressCountryCode,callback:function(t){e.$set(e.model,"addressCountryCode",t)},expression:"model.addressCountryCode"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:{regex:e.$util.getRegex("lat")},expression:"{ regex: $util.getRegex('lat')}"}],attrs:{counter:10,"error-messages":e.errors.collect("addressLatitude"),"data-vv-name":"addressLatitude",label:e.$t("profile.addressLatitude")},model:{value:e.model.addressLatitude,callback:function(t){e.$set(e.model,"addressLatitude",t)},expression:"model.addressLatitude"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:{regex:e.$util.getRegex("long")},expression:"{ regex: $util.getRegex('long')}"}],attrs:{counter:10,"error-messages":e.errors.collect("addressLongitude"),"data-vv-name":"addressLongitude",label:e.$t("profile.addressLongitude")},model:{value:e.model.addressLongitude,callback:function(t){e.$set(e.model,"addressLongitude",t)},expression:"model.addressLongitude"}})],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",type:"submit",loading:e.loadingSubmit}},[e._v("\n        "+e._s(e.$t("profile.save"))+"\n      ")]),e._v(" "),r("v-btn",{staticClass:"ml-3",on:{click:e.onClear}},[e._v("\n        "+e._s(e.$t("login.clear"))+"\n      ")])],1)],1)],1)}),[],!1,null,null,null),address=J.exports;_()(J,{VBtn:$.a,VCardActions:V.a,VCol:E.a,VContainer:k.a,VForm:N.a,VRow:R.a,VSpacer:A.a,VTextField:D.a});function K(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function z(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?K(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):K(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}r(20)("app:comp.user-profile-address");var G={layout:"user",$_veeValidate:{validator:"new"},components:{},data:function(){return{loadingSubmit:!1,error:void 0,model:{jobCompanyName:"",jobTitle:"",jobType:"",jobPhone:"",jobWebSite:"",jobEmail:""}}},created:function(){this.user&&(this.model.jobCompanyName=this.user.profile.jobCompanyName,this.model.jobTitle=this.user.profile.jobTitle,this.model.jobType=this.user.profile.jobType,this.model.jobPhone=this.user.profile.jobPhone,this.model.jobWebSite=this.user.profile.jobWebSite,this.model.jobEmail=this.user.profile.jobEmail)},computed:z({},Object(n.c)({config:"getConfig"}),{},Object(n.e)("auth",["user"])),methods:z({onSubmit:function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dismissError(),e.next=3,this.$validator.validateAll();case 3:if(!this.$validator.errors.any()){e.next=7;break}this.showError("Validation Error!"),e.next=13;break;case 7:return this.loadingSubmit=!0,e.next=11,this.save(this.model);case 11:e.sent&&(this.showSuccess("".concat(this.$t("profile.successSaveUser"),"!")),setTimeout((function(){t.loadingSubmit=!1}),1e3));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClear:function(){this.model.jobCompanyName="",this.model.jobTitle="",this.model.jobType="",this.model.jobPhone="",this.model.jobWebSite="",this.model.jobEmail="",this.$validator.reset(),this.dismissError()},dismissError:function(){this.error=void 0},save:function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(data){var t,r,n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$store.state["user-profiles"].idField,r=this.$FeathersVuex.UserProfile,e.prev=2,n={},Object(o.a)(n,t,this.user.profile.id),Object(o.a)(n,"jobCompanyName",data.jobCompanyName),Object(o.a)(n,"jobTitle",data.jobTitle),Object(o.a)(n,"jobType",data.jobType),Object(o.a)(n,"jobPhone",data.jobPhone),Object(o.a)(n,"jobWebSite",data.jobWebSite),Object(o.a)(n,"jobEmail",data.jobEmail),l=new r(n),e.next=7,l.save();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),this.loadingSubmit=!1,this.error=e.t0,this.showError(e.t0.message),e.next=18,r.get(this.user.profile.id);case 18:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},Object(n.d)({showSuccess:"SHOW_SUCCESS",showError:"SHOW_ERROR"}))},Q=Object(C.a)(G,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"max:20",expression:"'max:20'"}],attrs:{counter:20,"error-messages":e.errors.collect("jobCompanyName"),"data-vv-name":"jobCompanyName",label:e.$t("profile.jobCompanyName")},model:{value:e.model.jobCompanyName,callback:function(t){e.$set(e.model,"jobCompanyName",t)},expression:"model.jobCompanyName"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"max:35",expression:"'max:35'"}],attrs:{counter:35,"error-messages":e.errors.collect("jobTitle"),"data-vv-name":"jobTitle",label:e.$t("profile.jobTitle")},model:{value:e.model.jobTitle,callback:function(t){e.$set(e.model,"jobTitle",t)},expression:"model.jobTitle"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"max:15",expression:"'max:15'"}],attrs:{counter:15,"error-messages":e.errors.collect("jobType"),"data-vv-name":"jobType",label:e.$t("profile.jobType")},model:{value:e.model.jobType,callback:function(t){e.$set(e.model,"jobType",t)},expression:"model.jobType"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:{regex:e.$util.getRegex("phone")},expression:"{ regex: $util.getRegex('phone')}"}],attrs:{counter:15,"error-messages":e.errors.collect("jobPhone"),"data-vv-name":"jobPhone",label:e.$t("profile.jobPhone")},model:{value:e.model.jobPhone,callback:function(t){e.$set(e.model,"jobPhone",t)},expression:"model.jobPhone"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"email",expression:"'email'"}],attrs:{"error-messages":e.errors.collect("jobEmail"),"data-vv-name":"jobEmail",label:e.$t("profile.jobEmail")},model:{value:e.model.jobEmail,callback:function(t){e.$set(e.model,"jobEmail",t)},expression:"model.jobEmail"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"url",expression:"'url'"}],attrs:{"error-messages":e.errors.collect("jobWebSite"),"data-vv-name":"jobWebSite",label:e.$t("profile.jobWebSite")},model:{value:e.model.jobWebSite,callback:function(t){e.$set(e.model,"jobWebSite",t)},expression:"model.jobWebSite"}})],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",type:"submit",loading:e.loadingSubmit}},[e._v("\n        "+e._s(e.$t("profile.save"))+"\n      ")]),e._v(" "),r("v-btn",{staticClass:"ml-3",on:{click:e.onClear}},[e._v("\n        "+e._s(e.$t("login.clear"))+"\n      ")])],1)],1)],1)}),[],!1,null,null,null),X=Q.exports;function Y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}_()(Q,{VBtn:$.a,VCardActions:V.a,VCol:E.a,VContainer:k.a,VForm:N.a,VRow:R.a,VSpacer:A.a,VTextField:D.a});r(20)("app:page.user-profile");var ee={layout:"user",components:{AccountForm:W,PersonalForm:Z,AddressForm:address,JobForm:X},data:function(){return{title:this.$t("profile.title"),description:this.$t("profile.description"),step:0,steps:4,model:{avatar:""}}},head:function(){return{title:this.title,meta:[{hid:"description",name:"description",content:this.description}]}},created:function(){this.user&&(this.model.avatar=this.user.avatar)},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Y(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Y(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(n.c)({config:"getConfig",user:"getUser"})),methods:{next:function(){this.step=this.step+1},prev:function(){this.step=this.step-1},close:function(){var path=this.$i18n.path(this.config.homePath);this.$redirect(path)},currentTitle:function(e){switch(e){case 0:return this.$t("profile.userAccount");case 1:return this.$t("profile.userPersonalData");case 2:return this.$t("profile.userAddress");case 3:return this.$t("profile.userJob");default:return"Account created"}}}},te=r(262),re=r(256),ae=r(860),se=r(257),oe=r(1e3),ie=r(92),ne=r(918),le=r(919),de=Object(C.a)(ee,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-content"},[r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[r("v-card",[r("v-card-title",[r("v-icon",{staticClass:"mr-3"},[e._v("mdi-account-circle")]),e._v(" "),r("span",{staticClass:"headline"},[e._v(e._s(e.currentTitle(e.step)))]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:""},on:{click:e.close}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[r("v-icon",e._g({},o),[e._v("mdi-close")])]}}])},[e._v(" "),r("span",[e._v(e._s(e.$t("management.close")))])])],1)],1),e._v(" "),r("v-card-title",[r("div",{staticClass:"layout column align-center"},[r("v-avatar",{attrs:{size:"120"}},[r("img",{attrs:{src:e.model.avatar}})])],1)]),e._v(" "),r("v-window",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[r("v-window-item",{attrs:{value:0}},[r("v-card-text",[r("account-form")],1)],1),e._v(" "),r("v-window-item",{attrs:{value:1}},[r("v-card-text",[r("personal-form")],1)],1),e._v(" "),r("v-window-item",{attrs:{value:2}},[r("v-card-text",[r("address-form")],1)],1),e._v(" "),r("v-window-item",{attrs:{value:3}},[r("v-card-text",[r("job-form")],1)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",{staticClass:"justify-space-between"},[r("v-btn",{attrs:{disabled:0===e.step,depressed:"",icon:""},on:{click:e.prev}},[r("v-icon",{attrs:{large:""}},[e._v("mdi-menu-left")])],1),e._v(" "),r("v-item-group",{staticClass:"text-xs-center",attrs:{mandatory:""},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},e._l(e.steps,(function(t){return r("v-item",{key:"btn-"+t,scopedSlots:e._u([{key:"default",fn:function(o){var n=o.active,l=o.toggle;return r("v-btn",{attrs:{"input-value":n,icon:""},on:{click:l}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[r("v-icon",e._g({},o),[e._v("mdi-panorama-fisheye")])]}}],null,!0)},[e._v(" "),r("span",[e._v(e._s(e.currentTitle(t-1)))])])],1)}}],null,!0)})})),1),e._v(" "),r("v-btn",{attrs:{disabled:e.step===e.steps-1,depressed:"",icon:""},on:{click:e.next}},[r("v-icon",{attrs:{large:""}},[e._v("mdi-menu-right")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=de.exports;_()(de,{VAvatar:te.a,VBtn:$.a,VCard:re.a,VCardActions:V.a,VCardText:V.b,VCardTitle:V.c,VCol:E.a,VDivider:ae.a,VIcon:se.a,VItem:oe.a,VItemGroup:ie.b,VRow:R.a,VSpacer:A.a,VTooltip:T.a,VWindow:ne.a,VWindowItem:le.a})}}]);
//# sourceMappingURL=e409f590a493674d0f13.js.map